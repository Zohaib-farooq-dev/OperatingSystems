#include <stdlib.h>
#include <unistd.h>
#include <fcntl.h>
#include <stdio.h>
#include <string.h>
#include <time.h>

int main(){

   char* name = (char*)malloc(30*sizeof(char));
   char* department = (char*)malloc(30*sizeof(char));
   char* performance = (char*)malloc(30*sizeof(char));
   int* experience = (int*)malloc(20*sizeof(int));
   char* employeeId = (char*)malloc(20*sizeof(int));
   char cont ='n';
   int i=1;
   char newline = '\n';
   
   do{
      
      printf("Enter the details of Employees \n\n");
      printf("Enter the Employee Name : );
      scanf("%s",name);
      printf("Enter the Employee Department : );
      scanf("%s",department);
      printf("Enter the Employee Experience (should be integer) : );
      scanf("%d",experience);
      printf("Enter the Employee Performance (should be B,A,W) : );
      scanf("%c",performance);
      
      
      srand(time(0));
      int r = rand()%100;
      
      sprintf(employeeId,"%d",r);
      strncat(employeeId.".txt",4);
      
      int fd = open(employeeId,O_CREAT|O_APPEND|O_RDWR,0666);
      if(fd1<0){
         perror("Failed to open file : \n");
         exit(1);
       }
       
      write(fd,name,strlen(name));
      write(fd,&newline,1);
      write(fd,department,strlen(department));
      write(fd,&newline,1);
      write(fd,experience,sizeof(experience);
      write(fd,&newline,1);
      write(fd,performance,strlen(performance));
      write(fd,&newline,1);
      
      close(fd);
      
      printf("Do you want to add more users or not \n Enter 'y' to continue or 'n' to exit \n" );
      scanf("  %c",&cont); 
   

   
   }while(cont == 'y');

  return 0;
}
